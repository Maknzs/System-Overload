system-overload.com, www.system-overload.com {
    encode gzip

    # 1) Proxy all /api/* (any method) to the API container
    @api path /api/*
    handle @api {
        # Use the Docker Compose service name for reliable DNS resolution
        reverse_proxy http://api:8080
    }

    # 2) Static site for everything else (SPA-friendly)
    handle {
        root * /usr/share/caddy
        try_files {path} /index.html
        file_server
    }
}
