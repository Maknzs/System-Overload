.meta {
  display: flex;
  justify-content: center;
  gap: 16px;
  flex-wrap: wrap;
  align-items: center;
  margin-bottom: 14px;
}
.pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  background: #0f1533;
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: var(--muted);
}
.meta > * {
  display: inline-flex;
  align-items: center;
}
.hstack {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}
.zone-title {
  font-weight: 700;
  margin-bottom: 6px;
  opacity: 0.9;
}
.kv {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 6px 10px;
}
.deck-count {
  color: var(--warning);
  font-weight: 800;
}

.deck-area__panel {
  padding: 14px 16px;
}

.deck-area__count {
  font-size: 60px;
  font-weight: 900;
  color: red;
  line-height: 1;
}

.deck-area__label {
  color: red;
  margin: 6px 0 0;
  line-height: 1.2;
}
.log {
  margin-top: 8px;
}
.modal-title {
  color: var(--text);
  font-size: 50px;
  font-weight: 700;
}
/* Health Check modal card numbering */
.peek-card {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.peek-order {
  margin-top: 4px;
  font-weight: 700;
}

.hand-stack {
  position: relative;
  width: calc(
    var(--card-hand-w) + (var(--stack-count, 1) - 1) *
      var(--stack-spacing, 20px)
  );
  height: var(--card-hand-h);
}

.hand-stack > .ui-card {
  position: absolute;
  top: 0;
  left: calc(var(--stack-index) * var(--stack-spacing, 20px));
}

.pro-mode-overlay {
  position: absolute;
  z-index: 5;
  display: flex;
  align-items: center;
  justify-content: center;
}

.pro-mode-overlay__cover {
  position: absolute;
  inset: 0;
  border-radius: var(--card-radius);
  background: rgba(10, 16, 39, 0.82);
  box-shadow: var(--card-shadow);
  pointer-events: none;
}

.pro-mode-overlay__actions {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 8px;
  width: 100%;
  padding: 12px;
  box-sizing: border-box;
}

.pro-mode-overlay__actions .btn {
  width: 100%;
  padding: 0.5rem 0.6rem;
}

/* Draw animation: deck -> modal */
.fly-card {
  position: fixed;
  left: 0;
  top: 0;
  transform-origin: top left;
  perspective: 800px;
  transition: transform var(--dur-fly);
  /* Layer above the backdrop; modal shows after arrival */
  z-index: 70;
  pointer-events: none;
  /* Reduce flicker during compositing with backdrop-filter */
  will-change: transform;
  transform: translateZ(0);
  opacity: 1;
}
.fly-card__inner {
  position: absolute;
  inset: 0;
  transform-style: preserve-3d;
  transition: transform var(--dur-flip) var(--ease-emph);
  will-change: transform;
  transform: translateZ(0);
}
.fly-card__face {
  position: absolute;
  inset: 0; /* fill the container */
  border-radius: var(--card-radius);
  box-shadow: var(--card-shadow);
  backface-visibility: hidden;
  width: 100%;
  height: 100%;
  object-fit: contain;
  object-position: center;
  will-change: transform, opacity;
}
.fly-card__face.face--front {
  /* Drawn card overlay: reduce radius by 10px */
  border-radius: var(--card-radius);
  /* Sizing is driven by the parent inset; keep defaults */
}
.face--front {
  transform: rotateY(180deg);
}
.fly-card.is-running .fly-card__inner {
  transform: rotateY(180deg);
}

.fly-card.is-closing {
  opacity: 1;
}

/* Modal layout helpers for large card + description */
.modal-card {
  margin: 0 0 16px;
  border-radius: var(--card-radius);
}

.modal-desc {
  margin: 0;
}

/* Drawn card modal: match flip animation radius */
.drawn-modal-card .ui-card img {
  border-radius: var(--card-radius);
}

/* Fatal modal: in-place flip card (back <-> front) */
.flip-card {
  position: relative;
  width: var(--card-modal-w);
  height: var(--card-modal-h);
  perspective: 800px;
}
.flip-card__inner {
  position: absolute;
  inset: 0;
  transform-style: preserve-3d;
  transition: transform var(--dur-flip) var(--ease-emph);
}
.flip-card__face {
  position: absolute;
  inset: 0; /* fill the container */
  border-radius: var(--card-radius);
  box-shadow: var(--card-shadow);
  backface-visibility: hidden;
  width: 100%;
  height: 100%;
  object-fit: contain;
  object-position: center;
}
.flip-card__face.face--front {
  /* Match overlay front-face radius adjustments */
  border-radius: var(--card-radius);
  /* Sizing is driven by the parent inset; keep defaults */
}
.flip-card.is-flipped .flip-card__inner {
  transform: rotateY(180deg);
}

/* Reboot cover overlay: slightly askew to reveal Fatal underneath */
.reboot-cover {
  position: absolute;
  top: -8px;
  left: 18px;
  width: var(--card-modal-w);
  height: var(--card-modal-h);
  transform: rotate(-6deg) scale(0.985);
  border-radius: var(--card-radius);
  box-shadow: var(--card-shadow);
  pointer-events: none; /* purely decorative */
}

.reboot-cover.animate-in {
  animation: rebootSlideIn var(--dur-reboot) var(--ease-emph) both;
}

@keyframes rebootSlideIn {
  0% {
    transform: translateX(120vw) rotate(-12deg) scale(0.98);
    opacity: 0;
  }
  70% {
    transform: translateX(-8px) rotate(-7.25deg) scale(0.985);
    opacity: 1;
  }
  100% {
    transform: translateX(0) rotate(-6deg) scale(0.985);
    opacity: 1;
  }
}

@media (max-width: 480px) {
  .game-page .page-header {
    font-size: 1.5rem;
    letter-spacing: 1.05vw;
  }

  .game-page .section-title {
    font-size: 18px;
  }

  .game-page .modal-title {
    font-size: 2.4rem;
  }

  .game-page .meta {
    gap: 10px;
    font-size: 0.85rem;
  }

  .game-page .pill,
  .game-page .badge {
    font-size: 0.75rem;
    padding: 4px 8px;
  }

  .game-page .subtle {
    font-size: 0.75rem;
  }

  .deck-area__panel {
    padding: 10px 12px;
  }

  .deck-area__left {
    gap: 12px;
  }

  .deck-area__count {
    font-size: 45px;
  }

  .deck-area__label {
    font-size: 16px;
  }
}

@media (max-height: 640px) {
  .modal-title {
    font-size: clamp(1.6rem, 5vw, 2.4rem);
  }

  .modal-card {
    margin: 0;
  }

  .modal-desc {
    font-size: clamp(0.95rem, 3vw, 1.15rem);
  }
}

@media (max-height: 520px) {
  .modal-title {
    font-size: clamp(1.4rem, 4.5vw, 2rem);
  }

  .modal-desc {
    font-size: clamp(0.85rem, 2.6vw, 1rem);
  }
}
